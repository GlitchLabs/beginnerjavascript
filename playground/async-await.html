<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="../base.css" />
    <title>async-await</title>
  </head>
  <body>
    <script>
      function wait(ms = 0) {
        return new Promise(resolve => {
          setTimeout(resolve, ms);
        });
      }

      const go = async () => {
        console.log("starting");
        await wait(1000);
        console.log("ending");
      };
      go();

      // // function declaration
      // async function fd() {}

      // // arrow
      // const arrow = async () => {};

      // window.addEventListener("click", async function() {});
      // const person = {
      //   sayHi: async function() {},
      //   async sayHello() {},
      //   sayHey: async function() {}
      // };

      function makePizza(toppings = []) {
        // const pizzaPromise
        let bakeTime = 500 + toppings.length * 200;
        console.log(bakeTime);

        return new Promise(function(resolve, reject) {
          console.log("checking for pinapple one sec...");
          setTimeout(function() {
            toppings.includes("pinapple")
              ? reject("we dont server your kind savage")
              : console.log(
                  `pizza is cooking wait time is ${bakeTime / 1000} seconds`,
                  setTimeout(function() {
                    resolve(`mmmhhh pizza pizza oh and with ${toppings}`);
                  }, bakeTime)
                );
          }, 2000);
        });

        //return pizzaPromise;
      }

      async function makeDinner() {
        const pizza1 = makePizza(["fish guts"]);
        const pizza2 = makePizza(["fish", "foot gun", "guts"]);

        const dinner = await Promise.all([pizza1, pizza2]);
        const [guts, junk] = await Promise.all([pizza1, pizza2]);

        // console.log(pizza1);
        // console.log(pizza2);
        console.log(dinner);
        console.log(guts, junk);
      }
      makeDinner();
    </script>
  </body>
</html>
